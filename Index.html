<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üß¨ Grile GeneticƒÉ MedicalƒÉ</title>
    <style>
        :root {
            --bg-primary: #0a0e27;
            --bg-secondary: #151934;
            --bg-tertiary: #1e2440;
            --text-primary: #ffffff;
            --text-secondary: #9ca3af;
            --border-color: #2d3548;
            --accent-blue: #3b82f6;
            --accent-purple: #8b5cf6;
            --accent-green: #22c55e;
            --accent-red: #ef4444;
            --gradient-primary: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            --gradient-success: linear-gradient(135deg, #22c55e 0%, #10b981 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .screen {
            display: none;
            min-height: 100vh;
        }

        .screen.active {
            display: flex;
            flex-direction: column;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Welcome Screen */
        #welcomeScreen {
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 2rem;
        }

        .welcome-container {
            max-width: 600px;
        }

        .dna-animation {
            width: 120px;
            height: 120px;
            margin: 0 auto 2rem;
            position: relative;
        }

        .helix {
            position: absolute;
            width: 10px;
            height: 100%;
            background: var(--gradient-primary);
            border-radius: 5px;
            animation: rotate 2s infinite;
        }

        .helix:nth-child(2) {
            animation-delay: -1s;
            background: var(--gradient-success);
        }

        @keyframes rotate {
            0%, 100% { transform: translateX(-25px) scaleY(1); }
            50% { transform: translateX(25px) scaleY(0.8); }
        }

        .welcome-title {
            font-size: 3rem;
            margin-bottom: 1rem;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .welcome-subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
            margin-bottom: 3rem;
        }

        .btn-large {
            padding: 1.25rem 3rem;
            font-size: 1.1rem;
            font-weight: 600;
            border: none;
            border-radius: 1rem;
            cursor: pointer;
            background: var(--gradient-primary);
            color: white;
            box-shadow: 0 10px 30px rgba(59, 130, 246, 0.3);
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
        }

        .btn-large:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(59, 130, 246, 0.4);
        }

        /* Header */
        .app-header {
            background: var(--bg-secondary);
            border-bottom: 2px solid var(--border-color);
            padding: 1.5rem 2rem;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .header-stats {
            display: flex;
            gap: 1rem;
        }

        .stat-chip {
            background: var(--bg-tertiary);
            padding: 0.5rem 1rem;
            border-radius: 0.75rem;
            font-size: 0.95rem;
        }

        .stat-label {
            color: var(--text-secondary);
            margin-right: 0.5rem;
        }

        .stat-value {
            color: var(--text-primary);
            font-weight: 600;
        }

        /* Courses Grid */
        .courses-grid {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 1.5rem;
        }

        .course-card {
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-left-width: 4px;
            border-radius: 1.25rem;
            padding: 1.75rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .course-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4);
        }

        .course-card:nth-child(1) { border-left-color: #ef4444; }
        .course-card:nth-child(2) { border-left-color: #f97316; }
        .course-card:nth-child(3) { border-left-color: #eab308; }
        .course-card:nth-child(4) { border-left-color: #22c55e; }
        .course-card:nth-child(5) { border-left-color: #3b82f6; }
        .course-card:nth-child(6) { border-left-color: #8b5cf6; }
        .course-card:nth-child(7) { border-left-color: #ec4899; }
        .course-card:nth-child(8) { border-left-color: #14b8a6; }
        .course-card:nth-child(9) { border-left-color: #ef4444; }
        .course-card:nth-child(10) { border-left-color: #f97316; }
        .course-card:nth-child(11) { border-left-color: #22c55e; }
        .course-card:nth-child(12) { border-left-color: #3b82f6; }
        .course-card:nth-child(13) { border-left-color: #8b5cf6; }

        .course-header-content {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.25rem;
        }

        .course-emoji {
            font-size: 2.5rem;
        }

        .course-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .course-subtitle {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .progress-track {
            height: 6px;
            background: var(--bg-tertiary);
            border-radius: 10px;
            overflow: hidden;
            margin-top: 0.5rem;
        }

        .progress-bar {
            height: 100%;
            background: var(--gradient-primary);
            transition: width 0.5s;
            border-radius: 10px;
        }

        /* Config Screen */
        .config-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
        }

        .config-card {
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 1.25rem;
            padding: 2rem;
            margin-bottom: 1.5rem;
        }

        .config-card h2 {
            margin-bottom: 1.25rem;
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
        }

        .option-btn {
            background: var(--bg-tertiary);
            border: 2px solid var(--border-color);
            color: var(--text-primary);
            padding: 1rem;
            border-radius: 0.875rem;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
        }

        .option-btn:hover {
            border-color: var(--accent-blue);
            background: var(--bg-primary);
        }

        .option-btn.active {
            background: var(--gradient-primary);
            border-color: transparent;
        }

        .modes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .mode-card {
            background: var(--bg-tertiary);
            border: 2px solid var(--border-color);
            border-radius: 1.25rem;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .mode-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-blue);
        }

        .mode-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        /* Quiz Screen */
        .quiz-header {
            background: var(--bg-secondary);
            border-bottom: 2px solid var(--border-color);
            padding: 1rem 1.5rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
        }

        .btn-icon {
            background: transparent;
            border: none;
            color: var(--text-secondary);
            font-size: 1.5rem;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-icon:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .quiz-progress-container {
            flex: 1;
            max-width: 500px;
        }

        .progress-text {
            display: block;
            text-align: center;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .quiz-content {
            flex: 1;
            max-width: 900px;
            width: 100%;
            margin: 0 auto;
            padding: 2rem;
        }

        .question-container {
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 1.5rem;
            padding: 2.5rem;
        }

        .question-badge {
            display: inline-block;
            background: rgba(59, 130, 246, 0.15);
            border: 1px solid rgba(59, 130, 246, 0.3);
            color: var(--accent-blue);
            padding: 0.5rem 1rem;
            border-radius: 0.75rem;
            font-size: 0.9rem;
            margin-bottom: 1.5rem;
        }

        .question-text {
            font-size: 1.4rem;
            line-height: 1.7;
            margin-bottom: 2rem;
        }

        .answers-grid {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .answer-option {
            background: var(--bg-tertiary);
            border: 2px solid var(--border-color);
            border-radius: 1rem;
            padding: 1.25rem;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .answer-option:hover {
            border-color: var(--accent-blue);
            background: var(--bg-primary);
        }

        .answer-option.selected {
            border-color: var(--accent-blue);
            background: rgba(59, 130, 246, 0.1);
        }

        .answer-option.correct {
            border-color: var(--accent-green);
            background: rgba(34, 197, 94, 0.1);
        }

        .answer-option.wrong {
            border-color: var(--accent-red);
            background: rgba(239, 68, 68, 0.1);
        }

        .answer-check {
            width: 28px;
            height: 28px;
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            flex-shrink: 0;
        }

        .answer-option.selected .answer-check {
            background: var(--accent-blue);
            border-color: var(--accent-blue);
        }

        .answer-option.correct .answer-check {
            background: var(--accent-green);
            border-color: var(--accent-green);
        }

        .answer-option.wrong .answer-check {
            background: var(--accent-red);
            border-color: var(--accent-red);
        }

        .answer-check::after {
            content: '‚úì';
            color: white;
            font-weight: bold;
            font-size: 1rem;
            opacity: 0;
        }

        .answer-option.selected .answer-check::after,
        .answer-option.correct .answer-check::after {
            opacity: 1;
        }

        .answer-option.wrong .answer-check::after {
            content: '‚úó';
            opacity: 1;
        }

        .answer-label {
            font-weight: 700;
            margin-right: 0.5rem;
            font-size: 1.1rem;
        }

        .answer-text {
            flex: 1;
            font-size: 1.05rem;
        }

        .feedback-box {
            background: var(--bg-tertiary);
            border: 2px solid var(--border-color);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .feedback-box.correct {
            border-color: var(--accent-green);
            background: rgba(34, 197, 94, 0.1);
        }

        .feedback-box.wrong {
            border-color: var(--accent-red);
            background: rgba(239, 68, 68, 0.1);
        }

        .feedback-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .btn-submit {
            width: 100%;
            padding: 1.25rem;
            font-size: 1.1rem;
            font-weight: 600;
            border: none;
            border-radius: 1rem;
            background: var(--gradient-primary);
            color: white;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-submit:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.3);
        }

        .btn-submit:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .quiz-nav {
            padding: 1.5rem 2rem;
            display: flex;
            gap: 1rem;
            max-width: 900px;
            margin: 0 auto;
        }

        .btn-nav {
            flex: 1;
            padding: 1rem 1.5rem;
            border: 2px solid var(--border-color);
            background: var(--bg-tertiary);
            color: var(--text-primary);
            font-weight: 600;
            border-radius: 0.875rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-nav:hover:not(:disabled) {
            border-color: var(--accent-blue);
        }

        .btn-nav:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .btn-nav.btn-next {
            background: var(--gradient-primary);
            border-color: transparent;
        }

        /* Results Screen */
        #resultsScreen {
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .results-container {
            max-width: 700px;
            text-align: center;
        }

        .results-icon {
            font-size: 5rem;
            margin-bottom: 1rem;
        }

        .results-title {
            font-size: 2.5rem;
            margin-bottom: 2rem;
        }

        .score-display {
            width: 220px;
            height: 220px;
            margin: 0 auto 1.5rem;
            position: relative;
        }

        .score-ring {
            transform: rotate(-90deg);
        }

        .score-bg {
            fill: none;
            stroke: var(--bg-tertiary);
            stroke-width: 12;
        }

        .score-progress {
            fill: none;
            stroke: url(#gradient);
            stroke-width: 12;
            stroke-linecap: round;
            stroke-dasharray: 565.48;
            stroke-dashoffset: 565.48;
            transition: stroke-dashoffset 1.5s ease;
        }

        .score-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .score-number {
            font-size: 3.5rem;
            font-weight: 700;
            display: block;
        }

        .score-total {
            font-size: 1.5rem;
            color: var(--text-secondary);
        }

        .score-percentage {
            font-size: 2rem;
            margin-bottom: 2rem;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stats-row {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-box {
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 1rem;
            padding: 1.5rem 1rem;
        }

        .stat-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .results-actions {
            display: flex;
            gap: 1rem;
        }

        .btn-primary, .btn-secondary {
            padding: 0.875rem 1.75rem;
            border: none;
            border-radius: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            flex: 1;
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: white;
        }

        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 2px solid var(--border-color);
        }

        .btn-back {
            background: transparent;
            border: none;
            color: var(--text-secondary);
            font-size: 1rem;
            cursor: pointer;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            transition: all 0.2s;
        }

        .btn-back:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        @media (max-width: 768px) {
            .courses-grid {
                grid-template-columns: 1fr;
                padding: 1rem;
            }
            
            .stats-row {
                grid-template-columns: 1fr;
            }
            
            .results-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- Welcome Screen -->
        <div id="welcomeScreen" class="screen active">
            <div class="welcome-container">
                <div class="dna-animation">
                    <div class="helix"></div>
                    <div class="helix"></div>
                </div>
                <h1 class="welcome-title">üß¨ Grile GeneticƒÉ MedicalƒÉ</h1>
                <p class="welcome-subtitle">PregƒÉtire pentru examen ‚Ä¢ 250 √ÆntrebƒÉri ‚Ä¢ 13 cursuri</p>
                <button class="btn-large" onclick="app.startApp()">
                    <span>√éncepe pregƒÉtirea</span>
                    <span>‚Üí</span>
                </button>
            </div>
        </div>

        <!-- Courses Screen -->
        <div id="coursesScreen" class="screen">
            <header class="app-header">
                <div class="header-content">
                    <h1>üìö Cursuri Disponibile</h1>
                    <div class="header-stats">
                        <div class="stat-chip">
                            <span class="stat-label">Progres:</span>
                            <span class="stat-value" id="globalProgress">0/250</span>
                        </div>
                        <div class="stat-chip">
                            <span class="stat-label">Acurate»õe:</span>
                            <span class="stat-value" id="globalAccuracy">0%</span>
                        </div>
                    </div>
                </div>
            </header>
            <main class="courses-grid" id="coursesGrid"></main>
        </div>

        <!-- Config Screen -->
        <div id="configScreen" class="screen">
            <header class="app-header">
                <button class="btn-back" onclick="app.showCoursesScreen()">‚Üê √énapoi</button>
                <h1 id="configCourseTitle">Configurare Quiz</h1>
            </header>
            <main class="config-container">
                <section class="config-card">
                    <h2>Tipul de √ÆntrebƒÉri:</h2>
                    <div class="options-grid">
                        <button class="option-btn active" data-type="all" onclick="app.selectType('all')">
                            Toate (<span id="countAll">0</span>)
                        </button>
                        <button class="option-btn" data-type="simplu" onclick="app.selectType('simplu')">
                            Complement Simplu (<span id="countSimplu">0</span>)
                        </button>
                        <button class="option-btn" data-type="multiplu" onclick="app.selectType('multiplu')">
                            Complement Dublu (<span id="countMultiplu">0</span>)
                        </button>
                    </div>
                </section>
                <section class="config-card">
                    <h2>NumƒÉr de √ÆntrebƒÉri:</h2>
                    <div class="options-grid">
                        <button class="option-btn" onclick="app.selectLimit(10)">10</button>
                        <button class="option-btn active" onclick="app.selectLimit(20)">20</button>
                        <button class="option-btn" onclick="app.selectLimit(30)">30</button>
                        <button class="option-btn" onclick="app.selectLimit(50)">50</button>
                        <button class="option-btn" onclick="app.selectLimit('all')">Toate</button>
                    </div>
                </section>
                <section class="config-card">
                    <h2>Alege modul:</h2>
                    <div class="modes-grid">
                        <div class="mode-card" onclick="app.startQuiz('practice')">
                            <div class="mode-icon">üìù</div>
                            <h3>PracticƒÉ</h3>
                            <p>Vezi rƒÉspunsul dupƒÉ fiecare √Æntrebare</p>
                        </div>
                        <div class="mode-card" onclick="app.startQuiz('exam')">
                            <div class="mode-icon">üéØ</div>
                            <h3>Examen</h3>
                            <p>Rezultate doar la final</p>
                        </div>
                        <div class="mode-card" onclick="app.startQuiz('recap')">
                            <div class="mode-icon">üìñ</div>
                            <h3>Recapitulare</h3>
                            <p>Vezi toate √ÆntrebƒÉrile</p>
                        </div>
                    </div>
                </section>
            </main>
        </div>

        <!-- Quiz Screen -->
        <div id="quizScreen" class="screen">
            <header class="quiz-header">
                <button class="btn-icon" onclick="app.confirmExit()">‚úï</button>
                <div class="quiz-progress-container">
                    <span class="progress-text" id="progressText">1 / 20</span>
                    <div class="progress-track">
                        <div class="progress-bar" id="progressBar"></div>
                    </div>
                </div>
                <button class="btn-icon">‚ò∞</button>
            </header>
            <main class="quiz-content">
                <div class="question-container">
                    <div class="question-badge" id="questionBadge">‚ÑπÔ∏è SelecteazƒÉ 1 rƒÉspuns corect</div>
                    <h2 class="question-text" id="questionText"></h2>
                    <div class="answers-grid" id="answersGrid"></div>
                    <div class="feedback-box" id="feedbackBox" style="display: none;"></div>
                    <button class="btn-submit" id="btnSubmit" onclick="app.checkAnswer()">VerificƒÉ rƒÉspunsul</button>
                </div>
            </main>
            <nav class="quiz-nav">
                <button class="btn-nav" id="btnPrev" onclick="app.prevQuestion()" disabled>‚Üê Anterior</button>
                <button class="btn-nav btn-next" id="btnNext" onclick="app.nextQuestion()" disabled>UrmƒÉtoarea ‚Üí</button>
            </nav>
        </div>

        <!-- Results Screen -->
        <div id="resultsScreen" class="screen">
            <div class="results-container">
                <div class="results-icon">üéâ</div>
                <h1 class="results-title">Rezultate</h1>
                <div class="score-display">
                    <svg class="score-ring" viewBox="0 0 200 200">
                        <defs>
                            <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#8b5cf6;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                        <circle class="score-bg" cx="100" cy="100" r="90"/>
                        <circle class="score-progress" cx="100" cy="100" r="90" id="scoreRing"/>
                    </svg>
                    <div class="score-text">
                        <span class="score-number" id="scoreNumber">0</span>
                        <span class="score-total" id="scoreTotal">/ 20</span>
                    </div>
                </div>
                <h2 class="score-percentage" id="scorePercent">0%</h2>
                <div class="stats-row">
                    <div class="stat-box">
                        <div class="stat-icon">‚úì</div>
                        <div class="stat-number" id="correctAnswers">0</div>
                        <div class="stat-label">Corecte</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-icon">‚úó</div>
                        <div class="stat-number" id="wrongAnswers">0</div>
                        <div class="stat-label">Gre»ôite</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-icon">‚è±Ô∏è</div>
                        <div class="stat-number" id="timeSpent">0m</div>
                        <div class="stat-label">Timp</div>
                    </div>
                </div>
                <div class="results-actions">
                    <button class="btn-secondary" onclick="app.reviewQuiz()">üìã Revizuie»ôte</button>
                    <button class="btn-primary" onclick="app.showCoursesScreen()">üè† √énapoi la cursuri</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // DATA
        const COURSES = [
            {id: 1, number: 1, name: "Structura acizilor nucleici", icon: "üß¨", description: "Nucleotide, ADN, Chargaff", totalQuestions: 21},
            {id: 2, number: 2, name: "Replicare ADN, ARN, ADN mitocondrial", icon: "üîÑ", description: "Replicare semiconservativƒÉ", totalQuestions: 26},
            {id: 3, number: 3, name: "CromatinƒÉ »ôi cromozomi", icon: "üìä", description: "Histone, nucleozom", totalQuestions: 16},
            {id: 4, number: 4, name: "Gena: structurƒÉ »ôi func»õie", icon: "üß™", description: "Exoni, introni, promotori", totalQuestions: 15},
            {id: 5, number: 5, name: "Transcrip»õie »ôi transla»õie", icon: "‚ö°", description: "Cod genetic, ribozom", totalQuestions: 13},
            {id: 6, number: 6, name: "Muta»õii »ôi evolu»õie genom", icon: "üî¨", description: "Muta»õii, frameshift", totalQuestions: 16},
            {id: 7, number: 7, name: "Reparare ADN »ôi patologii", icon: "üõ°Ô∏è", description: "BER, NER, MMR", totalQuestions: 19},
            {id: 8, number: 8, name: "Omics, linkage, HGP", icon: "üåê", description: "Linkage, genom uman", totalQuestions: 10},
            {id: 9, number: 9, name: "OncogeneticƒÉ", icon: "üéØ", description: "Proto-oncogene, p53", totalQuestions: 21},
            {id: 10, number: 10, name: "GeneticƒÉ dezvoltare", icon: "üå±", description: "CƒÉi semnalizare", totalQuestions: 33},
            {id: 11, number: 11, name: "GeneticƒÉ medicalƒÉ I", icon: "üè•", description: "Aneuploidii, trisomii", totalQuestions: 23},
            {id: 12, number: 12, name: "GeneticƒÉ medicalƒÉ II", icon: "üíä", description: "Boli mitocondriale", totalQuestions: 26},
            {id: 13, number: 13, name: "GeneticƒÉ medicalƒÉ III", icon: "üîç", description: "Screening prenatal", totalQuestions: 10}
        ];

        const QUESTIONS = {
            1: [
                {id: "c1_q1", text: "LegƒÉtura fosfodiestericƒÉ se stabile»ôte √Æntre:", type: "simplu", 
                 options: {A: "C1 »ôi C5", B: "C3 »ôi C5", C: "C3 »ôi C1", D: "C1 »ôi C3"}, 
                 correct: ["B"], explanation: "C3 a pentozei se leagƒÉ de fosfatul ata»ôat la C5."},
                {id: "c1_q2", text: "Conforma»õia ADN predominantƒÉ √Æn celule este:", type: "simplu",
                 options: {A: "ADN-Z", B: "ADN-A", C: "ADN-B", D: "ADN-C"},
                 correct: ["C"], explanation: "ADN-B este forma fiziologicƒÉ, cu helix dextrogir."},
                {id: "c1_q3", text: "NumƒÉrul estimat de gene la om:", type: "simplu",
                 options: {A: "50000", B: "5000", C: "20000", D: "nu se poate estima"},
                 correct: ["C"], explanation: "~20,000-25,000 gene codante."},
                {id: "c1_q4", text: "Legile lui Chargaff:", type: "multiplu",
                 options: {A: "A=T", B: "G=C", C: "(A+T)/(G+C)=1", D: "(A+T)/(G+C) variazƒÉ"},
                 correct: ["A", "B"], explanation: "A=T »ôi G=C prin √Æmperechere complementarƒÉ."}
            ],
            2: [
                {id: "c2_q1", text: "Replicarea ADN este:", type: "simplu",
                 options: {A: "conservativƒÉ", B: "semiconservativƒÉ", C: "dispersivƒÉ", D: "aleatorie"},
                 correct: ["B"], explanation: "Demonstrat de Meselson-Stahl."},
                {id: "c2_q2", text: "ADN polimeraza sintetizeazƒÉ √Æn direc»õia:", type: "simplu",
                 options: {A: "3'‚Üí5'", B: "5'‚Üí3'", C: "ambele", D: "fƒÉrƒÉ direc»õie"},
                 correct: ["B"], explanation: "Toate polimerazele 5'‚Üí3'."}
            ],
            10: [
                {id: "c10_q1", text: "Despre displazii - EXCEP»öIE:", type: "simplu",
                 options: {A: "organizare celularƒÉ anormalƒÉ", B: "origine ectodermicƒÉ", C: "modificƒÉri de formƒÉ", D: "muta»õii FGFR"},
                 correct: ["C"], explanation: "C = deforma»õii, nu displazii."},
                {id: "c10_q2", text: "Acondroplazia este:", type: "simplu",
                 options: {A: "deforma»õie", B: "malforma»õie", C: "displazie scheleticƒÉ", D: "disrup»õie"},
                 correct: ["C"], explanation: "Displazie prin muta»õie FGFR3."}
            ]
        };

        function getCourseQuestions(id) { return QUESTIONS[id] || []; }
        function getCourseStats(id) {
            const q = getCourseQuestions(id);
            return {total: q.length, simplu: q.filter(x=>x.type==='simplu').length, multiplu: q.filter(x=>x.type==='multiplu').length};
        }

        // APP
        class GeneticaApp {
            constructor() {
                this.currentCourse = null;
                this.selectedType = 'all';
                this.selectedLimit = 20;
                this.quizMode = 'practice';
                this.questions = [];
                this.currentIndex = 0;
                this.userAnswers = [];
                this.selectedOptions = [];
                this.startTime = null;
            }

            showScreen(id) {
                document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
                document.getElementById(id).classList.add('active');
            }

            startApp() {
                this.showCoursesScreen();
            }

            showCoursesScreen() {
                this.showScreen('coursesScreen');
                this.renderCourses();
                this.updateGlobalStats();
            }

            renderCourses() {
                const grid = document.getElementById('coursesGrid');
                grid.innerHTML = '';
                COURSES.forEach(course => {
                    const progress = this.getCourseProgress(course.id);
                    const pct = Math.round((progress.attempted / course.totalQuestions) * 100) || 0;
                    const card = document.createElement('div');
                    card.className = 'course-card';
                    card.onclick = () => this.showConfigScreen(course.id);
                    card.innerHTML = `
                        <div class="course-header-content">
                            <div class="course-emoji">${course.icon}</div>
                            <div><div class="course-title">${course.name}</div>
                            <div class="course-subtitle">${course.description}</div></div>
                        </div>
                        <div style="margin-top:1rem;font-size:0.9rem;color:var(--text-secondary);">Progres: ${pct}%</div>
                        <div class="progress-track"><div class="progress-bar" style="width:${pct}%"></div></div>
                        <div style="margin-top:0.5rem;font-size:0.9rem;color:var(--text-secondary);">${progress.attempted}/${course.totalQuestions} √ÆntrebƒÉri</div>
                    `;
                    grid.appendChild(card);
                });
            }

            showConfigScreen(id) {
                this.currentCourse = COURSES.find(c => c.id === id);
                this.showScreen('configScreen');
                document.getElementById('configCourseTitle').textContent = this.currentCourse.name;
                const stats = getCourseStats(id);
                document.getElementById('countAll').textContent = stats.total;
                document.getElementById('countSimplu').textContent = stats.simplu;
                document.getElementById('countMultiplu').textContent = stats.multiplu;
            }

            selectType(type) {
                this.selectedType = type;
                document.querySelectorAll('[data-type]').forEach(b => b.classList.remove('active'));
                document.querySelector(`[data-type="${type}"]`).classList.add('active');
            }

            selectLimit(limit) {
                this.selectedLimit = limit;
                document.querySelectorAll('.option-btn').forEach(b => b.classList.remove('active'));
                event.target.classList.add('active');
            }

            startQuiz(mode) {
                this.quizMode = mode;
                let q = getCourseQuestions(this.currentCourse.id);
                if (this.selectedType !== 'all') q = q.filter(x => x.type === this.selectedType);
                q = this.shuffle([...q]);
                if (this.selectedLimit !== 'all') q = q.slice(0, this.selectedLimit);
                if (!q.length) return alert('Nu existƒÉ √ÆntrebƒÉri!');
                this.questions = q;
                this.currentIndex = 0;
                this.userAnswers = new Array(q.length).fill(null);
                this.selectedOptions = [];
                this.startTime = Date.now();
                this.showScreen('quizScreen');
                this.renderQuestion();
            }

            renderQuestion() {
                const q = this.questions[this.currentIndex];
                document.getElementById('progressText').textContent = `${this.currentIndex+1} / ${this.questions.length}`;
                document.getElementById('progressBar').style.width = `${((this.currentIndex+1)/this.questions.length)*100}%`;
                document.getElementById('questionBadge').textContent = q.type==='multiplu' ? '‚ÑπÔ∏è SelecteazƒÉ 2 rƒÉspunsuri' : '‚ÑπÔ∏è SelecteazƒÉ 1 rƒÉspuns';
                document.getElementById('questionText').textContent = q.text;
                this.renderOptions();
                document.getElementById('feedbackBox').style.display = 'none';
                this.updateButtons();
            }

            renderOptions() {
                const q = this.questions[this.currentIndex];
                const grid = document.getElementById('answersGrid');
                grid.innerHTML = '';
                const userAns = this.userAnswers[this.currentIndex];
                Object.entries(q.options).forEach(([key, text]) => {
                    const opt = document.createElement('div');
                    opt.className = 'answer-option';
                    if (!userAns) opt.onclick = () => this.selectOption(key);
                    if (this.selectedOptions.includes(key)) opt.classList.add('selected');
                    if (userAns && this.quizMode === 'practice') {
                        if (q.correct.includes(key)) opt.classList.add('correct');
                        else if (userAns.includes(key)) opt.classList.add('wrong');
                    }
                    opt.innerHTML = `<div class="answer-check"></div><span class="answer-label">${key}.</span><span class="answer-text">${text}</span>`;
                    grid.appendChild(opt);
                });
            }

            selectOption(key) {
                const q = this.questions[this.currentIndex];
                if (q.type === 'multiplu') {
                    const idx = this.selectedOptions.indexOf(key);
                    if (idx > -1) this.selectedOptions.splice(idx, 1);
                    else if (this.selectedOptions.length < 2) this.selectedOptions.push(key);
                } else {
                    this.selectedOptions = [key];
                }
                this.renderOptions();
                this.updateButtons();
            }

            checkAnswer() {
                if (!this.selectedOptions.length) return;
                this.userAnswers[this.currentIndex] = [...this.selectedOptions];
                if (this.quizMode === 'practice') this.showFeedback();
                this.renderOptions();
                this.updateButtons();
            }

            showFeedback() {
                const q = this.questions[this.currentIndex];
                const correct = this.isCorrect(this.userAnswers[this.currentIndex], q.correct);
                const fb = document.getElementById('feedbackBox');
                fb.style.display = 'block';
                fb.className = `feedback-box ${correct ? 'correct' : 'wrong'}`;
                fb.innerHTML = `<div class="feedback-title">${correct ? '‚úì Corect!' : '‚úó Gre»ôit'}</div>
                    ${!correct ? `<p>RƒÉspuns corect: ${q.correct.join(', ')}</p>` : ''}
                    ${q.explanation ? `<p style="margin-top:1rem;color:var(--text-secondary);">${q.explanation}</p>` : ''}`;
            }

            isCorrect(a, b) {
                if (!a || !b || a.length !== b.length) return false;
                return a.sort().join('') === b.sort().join('');
            }

            updateButtons() {
                const ans = this.userAnswers[this.currentIndex] !== null;
                document.getElementById('btnSubmit').style.display = ans ? 'none' : 'block';
                document.getElementById('btnSubmit').disabled = !this.selectedOptions.length;
                document.getElementById('btnPrev').disabled = this.currentIndex === 0;
                document.getElementById('btnNext').disabled = !ans;
                document.getElementById('btnNext').textContent = this.currentIndex === this.questions.length-1 ? 'FinalizeazƒÉ ‚Üí' : 'UrmƒÉtoarea ‚Üí';
            }

            prevQuestion() {
                if (this.currentIndex > 0) {
                    this.currentIndex--;
                    this.selectedOptions = this.userAnswers[this.currentIndex] ? [...this.userAnswers[this.currentIndex]] : [];
                    this.renderQuestion();
                }
            }

            nextQuestion() {
                if (this.currentIndex < this.questions.length - 1) {
                    this.currentIndex++;
                    this.selectedOptions = this.userAnswers[this.currentIndex] ? [...this.userAnswers[this.currentIndex]] : [];
                    this.renderQuestion();
                } else {
                    this.finishQuiz();
                }
            }

            confirmExit() {
                if (confirm('Ie»ôi? Progresul se va pierde.')) this.showCoursesScreen();
            }

            finishQuiz() {
                this.saveProgress();
                this.showResults();
            }

            showResults() {
                this.showScreen('resultsScreen');
                const correct = this.userAnswers.filter((a, i) => this.isCorrect(a, this.questions[i].correct)).length;
                const total = this.questions.length;
                const pct = Math.round((correct/total)*100);
                const time = Math.floor((Date.now()-this.startTime)/60000);
                document.getElementById('scoreNumber').textContent = correct;
                document.getElementById('scoreTotal').textContent = `/ ${total}`;
                document.getElementById('scorePercent').textContent = `${pct}%`;
                document.getElementById('correctAnswers').textContent = correct;
                document.getElementById('wrongAnswers').textContent = total-correct;
                document.getElementById('timeSpent').textContent = `${time}m`;
                const circ = 2*Math.PI*90;
                const offset = circ - (pct/100*circ);
                setTimeout(() => document.getElementById('scoreRing').style.strokeDashoffset = offset, 100);
            }

            reviewQuiz() {
                this.currentIndex = 0;
                this.selectedOptions = this.userAnswers[0] ? [...this.userAnswers[0]] : [];
                this.showScreen('quizScreen');
                this.renderQuestion();
            }

            getCourseProgress(id) {
                const saved = localStorage.getItem(`progress_${id}`);
                return saved ? JSON.parse(saved) : {attempted: 0, correct: 0};
            }

            saveProgress() {
                const correct = this.userAnswers.filter((a,i) => this.isCorrect(a, this.questions[i].correct)).length;
                const prog = this.getCourseProgress(this.currentCourse.id);
                prog.attempted += this.questions.length;
                prog.correct += correct;
                localStorage.setItem(`progress_${this.currentCourse.id}`, JSON.stringify(prog));
            }

            updateGlobalStats() {
                let attempted = 0, correct = 0;
                COURSES.forEach(c => {
                    const p = this.getCourseProgress(c.id);
                    attempted += p.attempted;
                    correct += p.correct;
                });
                const acc = attempted > 0 ? Math.round((correct/attempted)*100) : 0;
                document.getElementById('globalProgress').textContent = `${attempted}/250`;
                document.getElementById('globalAccuracy').textContent = `${acc}%`;
            }

            shuffle(arr) {
                const a = [...arr];
                for (let i = a.length-1; i > 0; i--) {
                    const j = Math.floor(Math.random()*(i+1));
                    [a[i], a[j]] = [a[j], a[i]];
                }
                return a;
            }
        }

        const app = new GeneticaApp();
    </script>
</body>
</html>
